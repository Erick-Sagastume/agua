{% extends 'Base/base.html' %}
{% block title %}Nueva Lectura{% endblock %}
{% block content %}


<a href="{% url 'Lectura' %}" class="btn btn-warning"> REGRESAR</a>

<div class="container" style="background-color: white;"><br>
    <div class="row">
        <div class="col-md-6">
            <h3>FORMULARIO INGRESO NUEVA LECTURA</h3>
        </div>
        <div class="col-md-6" align="right">
            <a href="{% url 'Inicio' %}"><i class="material-icons opacity-10" style="font-size: 35px;"
                    title="Inicio"></i></a>
        </div>
    </div>

    <form action="#" method="POST" enctype="multipart/form-data">{% csrf_token %}
        <div class="row">
            <div class="col-md-3">
                <div class="input-group input-group-outline my-4">
                    <label class="form-label">Numero de Cuenta</label>
                    <input type="text" class="form-control" name="cuenta" autofocus="cuenta" readonly value='{{cuenta}}' required>
                </div>
            </div>
            <div class="col-md-3">
                <div class="input-group input-group-outline my-4">
                    <label class="form-label">Lectura Anterior</label>
                    <input type="text" class="form-control" name="anterior" id="anterior" readonly value='{{u}}' required>
                </div>
            </div>
            <div class="col-md-3">
                <div class="input-group input-group-outline my-4">
                    <label class="form-label">Lectura Actual</label>
                    <input type="text" class="form-control" name="actual" id="actual" required>
                </div>
            </div>

        </div>

        <div class="row">

            <div class="col-md-6">
                <div class="input-group input-group-outline my-3">
                    <label class="form-label">Consumo</label>
                    <input type="text" class="form-control" name="consumo" id="consumo" onclick="clic()" required
                        readonly>
                </div>
            </div>

            <div class="col-md-6">
                <div class="input-group input-group-outline my-3">
                    <select name="mes" class="form-control">
                        <option value="">Elija Mes de Lectura</option>
                        <option value="Enero">Enero</option>
                        <option value="Febrero">Febrero</option>
                        <option value="Marzo">Marzo</option>
                        <option value="Abril">Abril</option>
                        <option value="Mayo">Mayo</option>
                        <option value="Junio">Junio</option>
                        <option value="Julio">Julio</option>
                        <option value="Agosto">Agosto</option>
                        <option value="Septiembre">Septiembre</option>
                        <option value="Octubre">Octubre</option>
                        <option value="Noviembre">Noviembre</option>
                        <option value="Diciembre">Diciembre</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="input-group input-group-outline my-3">
                    <input type="text" class="form-control" name="fecha" value="{% now 'd-m-Y' %}" readonly>
                </div>
            </div>
            <div class="col-md-6">
                <div class="input-group input-group-outline my-3">
                    <input type="text" class="form-control" name="usuario" value="{{user.username}}" readonly>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-10">
                {% if messages %}
                {% if messages.tag == "success" %}
                {% for message in messages %}
                <div class="alert alert-danger alert-dismissible text-white" role="alert">
                    <span class="text-sm">{{message}}</span>
                    <button type="button" class="btn-close text-lg py-3 opacity-10" data-bs-dismiss="alert"
                        aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {% endfor %}
                {% else %}
                {% for message in messages %}
                <div class="alert alert-success alert-dismissible text-white" role="alert">
                    <span class="text-sm">{{message}}</span>
                    <button type="button" class="btn-close text-lg py-3 opacity-10" data-bs-dismiss="alert"
                        aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                {% endfor %}
                {% endif %}
                {% endif %}
            </div>

            <div class="col-md-10" align="right">
                <button type="submit" class="btn btn-sm btn-success">Guardar</button>
                <button type="reset" class="btn btn-sm btn-danger">Cancelar</button>
            </div>
        </div>
    </form>
</div>

<script>
    function clic() {
        var anterior = document.getElementById("anterior").value;
        var actual = document.getElementById("actual").value;
        var resultado = parseFloat(actual) - parseInt(anterior);
        var consumo = document.getElementById('consumo').value = resultado;
    }
</script>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
{% endblock %}